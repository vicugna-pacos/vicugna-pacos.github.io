<!doctype html><html><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-143399608-2"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-143399608-2');</script><meta name=generator content="Hugo 0.74.1"><link rel=stylesheet href="https://fonts.googleapis.com/icon?family=Material+Icons"><link rel=stylesheet href=https://vicugna-pacos.github.io/css/normalize.css><link rel=stylesheet href=https://vicugna-pacos.github.io/css/main.css><link rel=stylesheet href=https://vicugna-pacos.github.io/css/pagination.css><title>基本文法など - アルパカのメモ</title></head><body><header class=header-area><div class=content-container><span class=logo-text><a href=/>アルパカのメモ</a></span></div></header><main class=main-area><div class="content-container single"><div class=side><aside class=toc><p>目次</p><nav id=TableOfContents><ul><li><a href=#はじめに>はじめに</a></li><li><a href=#基本の文法>基本の文法</a><ul><li><a href=#コメントを書く>コメントを書く</a></li><li><a href=#周辺の余白をトリムする>周辺の余白をトリムする</a></li></ul></li><li><a href=#変数>変数</a><ul><li><a href=#page変数>Page変数</a></li></ul></li><li><a href=#テンプレートファイルの再利用>テンプレートファイルの再利用</a></li></ul></nav></aside></div><div class=main><article><h1>基本文法など</h1><div class=article-info><div><i class=material-icons>calendar_today</i>
<time datetime="2020-09-30 19:12:45 +0900 +0900" itemprop=datePublished>2020-09-30</time></div><div></div></div><h2 id=はじめに>はじめに</h2><p>Hugo バージョン：v0.74.3</p><p>Hugoのテンプレートは、Go言語の <code>html/template</code> とか <code>text/template</code> というライブラリを使用する。
詳しい使い方については、上記ライブラリのドキュメントを参照。</p><h2 id=基本の文法>基本の文法</h2><p>HTMLファイルで作ったテンプレート中に、 <code>{{ }}</code> で囲んだところがテンプレート用の構文を書くところになる。</p><p>定義済みの変数やプロパティは、以下のようにして記述する。基本的に、変数の内容がそのままHTMLへ出力される。</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=color:#75715e>{{</span> <span style=color:#75af00>.Title</span> <span style=color:#75715e>}}</span>
<span style=color:#75715e>{{</span> <span style=color:#75af00>$address</span> <span style=color:#75715e>}}</span>
</code></pre></div><h3 id=コメントを書く>コメントを書く</h3><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=color:#75715e>{{</span><span style=color:#75715e>/* コメント */</span><span style=color:#75715e>}}</span>
</code></pre></div><h3 id=周辺の余白をトリムする>周辺の余白をトリムする</h3><p><code>{{- -}}</code> のように、かっこの内側に<code>-</code>を付けると、前後の余白を無くしてくれる。</p><p>例えば、以下のようにテンプレートを書いた場合：</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=color:#111>&lt;</span><span style=color:#f92672>div</span><span style=color:#111>&gt;</span>
  <span style=color:#75715e>{{-</span> <span style=color:#75af00>.Title</span> <span style=color:#75715e>-}}</span>
<span style=color:#111>&lt;/</span><span style=color:#f92672>div</span><span style=color:#111>&gt;</span>
</code></pre></div><p>HTMLの出力結果は以下のようになる。タイトルの前後に入れていた改行と空白がなくなる。</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=color:#111>&lt;</span><span style=color:#f92672>div</span><span style=color:#111>&gt;</span>PageTitle!<span style=color:#111>&lt;/</span><span style=color:#f92672>div</span><span style=color:#111>&gt;</span>
</code></pre></div><h2 id=変数>変数</h2><p>テンプレートファイルでは、そのとき処理しているページの情報を、<code>Page</code>変数として参照できる。
ページ変数へは、<code>.</code>でアクセス可能で、<code>.Title</code>であれば、ページのタイトルを取得できる。
ページ変数の定義については、<a href=https://gohugo.io/variables/page/ target=_blank rel=noopener>Page Variables | Hugo</a> 参照。</p><p>また、テンプレートファイル内で変数を定義することも可能。変数名は<code>$</code>から始める。</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=color:#75715e>{{</span> <span style=color:#75af00>$arg1</span> <span style=color:#f92672>:=</span> <span style=color:#d88200>&#34;aiueo&#34;</span> <span style=color:#75715e>}}</span>
<span style=color:#75715e>{{</span> <span style=color:#75af00>$arg1</span> <span style=color:#75715e>}}</span>
</code></pre></div><p>(v0.47以前) ちなみに、変数の値をif文の中で変更して、if文の後でその値を参照することはできないらしい。
v0.48以降であれば、<code>=</code>を使って条件分岐で変数の値を変えることができるらしい。</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=color:#75715e>{{</span> <span style=color:#75af00>$var</span> <span style=color:#f92672>:=</span> <span style=color:#d88200>&#34;Hugo Page&#34;</span> <span style=color:#75715e>}}</span>
<span style=color:#75715e>{{</span> <span style=color:#00a8c8>if</span> <span style=color:#75af00>.IsHome</span> <span style=color:#75715e>}}</span>
    <span style=color:#75715e>{{</span> <span style=color:#75af00>$var</span> <span style=color:#960050;background-color:#1e0010>=</span> <span style=color:#d88200>&#34;Hugo Home&#34;</span> <span style=color:#75715e>}}</span>
<span style=color:#75715e>{{</span> <span style=color:#00a8c8>end</span> <span style=color:#75715e>}}</span>
Var is <span style=color:#75715e>{{</span> <span style=color:#75af00>$var</span> <span style=color:#75715e>}}</span>
</code></pre></div><h3 id=page変数>Page変数</h3><p>参考：<a href=https://gohugo.io/variables/page/ target=_blank rel=noopener>Page Variables | Hugo</a></p><p>よく使いそうなプロパティ：</p><ul><li><code>.Title</code> - ページのタイトル(front matterに書いたもの)</li><li><code>.Content</code> - ページの内容(front matterの後に書かれたもの)</li><li><code>.Date</code>, <code>.LastMod</code>, <code>.ExpiryDate</code>, <code>PublishDate</code> - front matterに書いた日付。</li><li><code>.Draft</code> - 下書きかどうか(front matter)</li><li><code>.Next</code> - 次のページ。<code>{{with .Next}}{{.Permalink}}{{end}}</code>と書けば次ページへのリンクを貼れる。</li><li><code>.NextInSection</code> - 同一セクション内での次ページ。</li></ul><h2 id=テンプレートファイルの再利用>テンプレートファイルの再利用</h2><p>テンプレートファイルから、別のテンプレートファイルを取り込むことができる。
どこにでも書くような内容は共通のテンプレートファイルにしておいて、他から使用することが可能。</p><p>共通テンプレートファイルは <code>layouts/partial</code> フォルダへ置くこと。</p><p>使用する側では、以下のように書く。</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=color:#75715e>{{</span> <span style=color:#75af00>partial</span> <span style=color:#d88200>&#34;header.html&#34;</span> <span style=color:#75af00>.</span> <span style=color:#75715e>}}</span>
</code></pre></div><p><code>partial</code> 関数以外にも <code>template</code> という関数があるが、こちらは古いバージョンから使われてきたものらしい。
現在では、internalテンプレート(Hugo内蔵のテンプレート)を使うときに使う。</p><p>internalテンプレートの顔ぶれは、<a href=https://github.com/gohugoio/hugo/tree/master/tpl/tplimpl/embedded/templates target=_blank rel=noopener>HugoのGitHubリポジトリ</a>で参照できる。</p></article></div></div></main><footer class=footer-area><div class=content-container><hr><div class=author-container><div class=avatar><img src=/images/avatar.jpg></div><div class=author><p class=author-name>alpaca</p><p>おおむねSIerにいますが、他業種の社内SEだったこともあります。</p><p><a href=https://github.com/vicugna-pacos><img src=/images/GitHub-Mark-32px.png style=width:2rem></a></p></div></div></div></footer></body></html>