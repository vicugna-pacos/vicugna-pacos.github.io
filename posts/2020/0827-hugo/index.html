<!doctype html><html><head><meta name=generator content="Hugo 0.74.1"><link rel=stylesheet href=https://vicugna-pacos.github.io/css/normalize.css><link rel=stylesheet href=https://vicugna-pacos.github.io/css/skeleton.css><link rel=stylesheet href=https://vicugna-pacos.github.io/css/main.css><link rel=stylesheet href=https://vicugna-pacos.github.io/css/pagination.css><title>Hugoで静的Webサイトを作る - アルパカのメモ</title></head><body><div class=container><div class=header-area><span class=logo-text><a href=/>アルパカのメモ</a></span></div><div class="row main-area"><div class="nine columns"><article><h1>Hugoで静的Webサイトを作る</h1><div class=article-info><span><img src=/images/icon-calendar_today-24px.svg>
<time datetime="2020-08-27 15:54:58 +0900 +0900" itemprop=datePublished>2020-08-27</time>
(最終更新：<time datetime="2020-09-07 15:54:58 +0900 +0900" itemprop=dateModified>2020-09-07</time>)</span>
<span><img src=/images/icon-label-24px.svg>
Hugo</span></div><h2 id=hugoとは>Hugoとは</h2><p>静的サイトジェネレータ。MarkdownファイルをHTMLファイルへ変換し、Webサイトにできるツール。<br><a href=https://gohugo.io/>公式サイト</a></p><p>バージョン：v0.74.3</p><h2 id=説明の前提条件>説明の前提条件</h2><p>Hugoアプリケーションの置場所：<code>C:\Hugo\bin</code><br>上記フォルダにPATHを通すので、置場所は違っていても大した問題ではない。</p><p>Webサイトのソースの置場所：<code>C:\Hugo\Sites</code><br>これも実際はどこでも構わない。</p><h2 id=インストール>インストール</h2><p>Hugoのバイナリを <a href=https://github.com/gohugoio/hugo/releases>https://github.com/gohugoio/hugo/releases</a> からダウンロードする。
Windows用のバイナリを探してダウンロード。
<img src=2020-08-27-15-56-01.png alt></p><p>zipファイルを解凍したら、<code>C:\Hugo\bin</code>をPATHに追加する。
もしexeファイルが<code>hugo.exe</code>ではない場合、ファイル名を変更しておく。</p><h3 id=稼働確認>稼働確認</h3><p>コマンドプロンプトを起動し、<code>hugo help</code>と入力する。以下のようなヘルプが出ればOK。</p><pre><code>hugo is the main command, used to build your Hugo site.

Hugo is a Fast and Flexible Static Site Generator
built with love by spf13 and friends in Go.

Complete documentation is available at http://gohugo.io/.

Usage:
  hugo [flags]
  hugo [command]

Available Commands:
  config      Print the site configuration
  convert     Convert your content to different formats
※以下略
</code></pre><p>コマンドプロンプトは、「管理者として実行」しないとhugoコマンドが動作しない場合がある。
(おそらくログオンアカウントの権限による)</p><h2 id=新しいサイトを作る>新しいサイトを作る</h2><p>コマンドプロンプトで以下を実行。</p><pre><code>cd C:\Hugo\Sites
hugo new site example.com
</code></pre><p>sitesフォルダ配下に<code>example.com</code>というフォルダが作られ、他にも色々フォルダが出来ている。</p><h3 id=設定ファイルを編集する>設定ファイルを編集する</h3><p>サイトフォルダ直下にある<code>config.toml</code>をテキストエディタで開くと、以下が既に書かれているので、適切な値へ直す。</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=color:#75af00>baseURL</span> <span style=color:#111>=</span> <span style=color:#d88200>&#34;http://example.org/&#34;</span>
<span style=color:#75af00>languageCode</span> <span style=color:#111>=</span> <span style=color:#d88200>&#34;en-us&#34;</span>
<span style=color:#75af00>title</span> <span style=color:#111>=</span> <span style=color:#d88200>&#34;My New Hugo Site&#34;</span>
</code></pre></div><h3 id=ソースをgitに登録する>ソースをGitに登録する</h3><p><code>example.com</code>フォルダをGitリポジトリとする。</p><h2 id=テーマを適用する>テーマを適用する</h2><p><a href=https://themes.gohugo.io/>https://themes.gohugo.io/</a> へ行って、好きなテーマを探す。
テーマはすべてGitリポジトリにあって、使う場合はsubmoduleとして追加するか、cloneするか、頑張ってダウンロードするかのいずれかで取得する。
テーマを決めたら、<code>themes</code>フォルダ内に追加する。</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Batchfile data-lang=Batchfile>git.exe submodule add   -- <span style=color:#d88200>&#34;https://github.com/dim0627/hugo_theme_beg.git&#34;</span> <span style=color:#d88200>&#34;themes/beg&#34;</span>
</code></pre></div><p>テーマを追加した後、<code>config.toml</code>を編集し、themesフォルダ配下に作ったフォルダ名をテーマ名として指定する。</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=color:#75af00>theme</span> <span style=color:#111>=</span> <span style=color:#d88200>&#34;beg&#34;</span>
</code></pre></div><h2 id=新しい記事を書く>新しい記事を書く</h2><p>以下を実行。</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Batchfile data-lang=Batchfile>hugo new <span style=color:#111>&lt;</span>セクション名<span style=color:#111>&gt;</span>/my-first-post.md
</code></pre></div><p>セクションが無い場合は、指定なしでも良い。
ブログサイトの記事を書くなら、セクション名は<code>blog</code>や<code>posts</code>がよさそう。
mdファイルは、<code>content</code>フォルダ配下に作成される。</p><h3 id=セクション>セクション</h3><p><a href=https://gohugo.io/content-management/sections/>https://gohugo.io/content-management/sections/</a></p><p>セクションは、<code>content</code>フォルダ配下のフォルダ構成で作られる。
既定では、<code>content</code>フォルダ直下のフォルダがそのままセクションとなる。
もしさらに深いフォルダをセクションとしたい場合は、そのフォルダの中に<code>_index.md</code>を作るとそのフォルダ名がセクションとなる。</p><pre><code>content
└ blog        &lt;- content直下のフォルダなのでセクションになる
    ├ funny-cats
    │   ├ mypost.md
    │   └ kittens         &lt;- _index.md があるのでセクションになる
    │       └ _index.md
    └ tech                &lt;- _index.md があるのでセクションになる
        └ _index.md
</code></pre><p>セクションには、メインセクションかどうかの概念もある。<br>メインセクションは、多くのテーマでトップページに記事一覧を表示する対象になっていたりする。
既定では、一番ページ数の多いセクションがメインセクションとなる。明確にメインセクションを指定したい場合は、<code>config.toml</code>に以下を記述する。</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=color:#111>[</span><span style=color:#75af00>params</span><span style=color:#111>]</span>
  <span style=color:#75af00>mainSections</span> <span style=color:#111>=</span> <span style=color:#111>[</span><span style=color:#d88200>&#34;blog&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;docs&#34;</span><span style=color:#111>]</span>
</code></pre></div><h3 id=moreタグを入れる>moreタグを入れる</h3><p><a href=https://gohugo.io/content-management/summaries/>Content Summaries | Hugo</a></p><p>記事中にmoreタグを入れると、一覧画面での記事を途中で分割できる。
これをいれないと、サマリーでHTMLが有効にならない。タグを入れない場合、サマリーがテキストのみになる。</p><h3 id=シンタックスハイライトを使う>シンタックスハイライトを使う</h3><p><a href=https://gohugo.io/content-management/syntax-highlighting/>Syntax Highlighting | Hugo</a></p><p>マークダウンで使う<code>```</code>のほかに、<code>&lt;highlight></code>というHugoのShortcodeも使える。
ハイライトの技術は「Chroma」というGoのライブラリを使っているらしい。
また、「Pygments」というライブラリにも互換性がある。</p><p>対応している言語は公式ドキュメントを参照。</p><h4 id=スタイルを変更する>スタイルを変更する</h4><p>使用するテーマ次第かもしれないが、コード部分のスタイルは既定では「monokai」という名前で、以下のようになっている。</p><p>スタイルはconfig.tomlで指定可能。</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=color:#111>[</span><span style=color:#75af00>markup</span><span style=color:#111>]</span>
  <span style=color:#111>[</span><span style=color:#75af00>markup</span><span style=color:#111>.</span><span style=color:#75af00>highlight</span><span style=color:#111>]</span>
    <span style=color:#75af00>style</span> <span style=color:#111>=</span> <span style=color:#d88200>&#34;monokai&#34;</span>
</code></pre></div><p>スタイル一覧は、Chroma参照。<br><a href=https://xyproto.github.io/splash/docs/all.html>https://xyproto.github.io/splash/docs/all.html</a></p><h3 id=見出しはh2から始めるべきか>見出しはh2から始めるべきか？</h3><p>通常、何も考えずにMarkdownを書く場合、見出しは<code>#</code>(h1)から始めると思う。
しかし、Hugoで記事の目次作成をさせると、<code>##</code>(h2)からの見出しを元に目次を作る。
なぜかというと、セマンティック的には<code>&lt;h1></code>はページのタイトルのような最上位のタイトルにつけるものであって、
ページにそう何個も作るものではないから、らしい。</p><p>参考：<a href=https://developer.mozilla.org/ja/docs/Glossary/Semantics>Semantics (セマンティクス) - MDN Web Docs 用語集: ウェブ関連用語の定義 | MDN</a></p><p>ではHugoが<code>#</code>から書かれたMarkdownを<code>&lt;h2></code>から始めてくれるかというと、そうなっていない。<code>&lt;h1></code>から始める。設定でカスタマイズする機能もない。
そうすると、Markdownで記事を書くときは、意識して<code>##</code>から始めるしかない。ちょっと不便。</p><p>目次作成機能については、<code>#</code>(h1)から作成するよう設定変更可能なので、こちらで対応するのが落としどころかと思う。</p><p>ちなみに、Qiitaの記事を確認したところ、記事タイトルも、レベル1見出しも、両方<code>&lt;h1></code>だった。
あまり深く考えない方がいいのかもしれない…。</p><h2 id=テストする>テストする</h2><p>サイトフォルダ直下で以下を実行。</p><pre><code>hugo server -D
</code></pre><p><code>-D</code>はdraftsが有効になるオプション。</p><p>ブラウザで http://localhost:1313/ にアクセスすると結果が見られる。</p><h2 id=静的ページを生成する>静的ページを生成する</h2><p>サイトフォルダ直下で以下を実行。</p><pre><code>hugo
</code></pre><p>既定では<code>public</code>フォルダに生成される。
<code>-d</code>オプションを付けるか、設定ファイルに<code>publishDir</code>を指定すると、生成先を変えられる。</p><p>生成されたフォルダをgitリポジトリとし、GitHub Pages用のリポジトリに登録すれば公開できる。</p></article></div><div class="three columns"><aside class=side-bar><span class=side-bar-title>最近の投稿</span><ul class=postlist><li><a href=https://vicugna-pacos.github.io/posts/2020/0911-pdf-to-image/>pdfファイルを画像にする</a></li><li><a href=https://vicugna-pacos.github.io/posts/2020/0827-hugo/>Hugoで静的Webサイトを作る</a></li><li><a href=https://vicugna-pacos.github.io/posts/2020/0823-vscode-tips/>Visual Studio Code の色々</a></li><li><a href=https://vicugna-pacos.github.io/posts/2020/0823-hugo-github-actions/>HugoとGitHub ActionsでGitHub Pagesを自動デプロイ</a></li></ul><span class=side-bar-title>タグ</span><ul class=taglist><li><a href=/tags/github-actions>github-actions</a><li><a href=/tags/hugo>hugo</a><li><a href=/tags/pdf>pdf</a><li><a href=/tags/vscode>vscode</a><li><a href=/tags/%E6%A5%AD%E5%8B%99%E5%8A%B9%E7%8E%87%E5%8C%96>業務効率化</a></ul></aside></div></div><footer><hr><aside class=f-author-container><div class=f-avatar><img src=/images/avatar.jpg></div><div class=f-author><p class=f-author-name>alpaca</p><p>おおむねSIerにいますが、他業種の社内SEだったこともあります。</p><p><a href=https://github.com/vicugna-pacos>GitHub</a></p></div></aside><p></p></footer></div></body></html>